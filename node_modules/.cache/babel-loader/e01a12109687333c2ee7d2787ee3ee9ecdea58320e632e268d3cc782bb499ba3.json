{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapState } from 'vuex';\nimport { getLock, setLock } from '@/utils/lock';\nimport { verPassword } from '@/api/api';\nimport elAsside from \"../../components/layout/aside\";\nimport elMain from \"../../components/layout/main\";\nimport elHeader from \"../../components/layout/header\";\nexport default {\n  name: \"index\",\n  data() {\n    return {\n      lock: 0,\n      pass: \"\"\n    };\n  },\n  components: {\n    elAsside,\n    elMain,\n    elHeader\n  },\n  computed: {\n    ...mapState({\n      activeMenuArrary: state => state.menu.activeMenuArrary,\n      activeMenu: state => state.menu.activeMenu\n    })\n  },\n  methods: {\n    leftScroll() {\n      var container = document.getElementById('menu');\n      // 向左滚动100像素\n      container.scrollLeft -= 100;\n    },\n    rightScroll() {\n      var container = document.getElementById('menu');\n      // 向右滚动100像素\n      container.scrollLeft += 100;\n    },\n    openMenu(url) {\n      if (this.activeMenu != url) {\n        this.$router.push({\n          path: url\n        });\n        this.$store.commit('menu/setActiveMenu', url);\n      }\n    },\n    closeMenu(url) {\n      var index = this.activeMenuArrary.length - 1;\n      for (let i = 0; i < this.activeMenuArrary.length; i++) {\n        if (this.activeMenuArrary[i].url == url) {\n          index = i;\n          break;\n        }\n      }\n      if (this.activeMenu == url) {\n        this.$router.push({\n          path: this.activeMenuArrary[index - 1].url\n        });\n        this.$store.commit('menu/setActiveMenu', this.activeMenuArrary[index - 1].url);\n      }\n      this.$store.commit('menu/reduceActiveMenu', index);\n      this.$bus.$emit(\"clearKeepAlive\", url);\n    },\n    unlock() {\n      if (!this.pass) {\n        this.$message({\n          message: '请输入密码验证',\n          type: 'warning'\n        });\n        return;\n      }\n      verPassword({\n        password: this.pass\n      }).then(res => {\n        if (res.code == 1000) {\n          this.$message({\n            message: '验证通过',\n            type: 'success'\n          });\n          this.pass = \"\";\n          this.$bus.$emit('lock', 0);\n        } else {\n          this.$message({\n            message: res.message,\n            type: 'error'\n          });\n        }\n      });\n    }\n  },\n  created() {},\n  mounted() {\n    // console.clear()\n    this.$nextTick(() => {\n      this.lock = getLock();\n      this.$bus.$on('lock', res => {\n        setLock(res);\n        this.lock = res;\n      });\n    });\n  }\n};","map":{"version":3,"names":["mapState","getLock","setLock","verPassword","elAsside","elMain","elHeader","name","data","lock","pass","components","computed","activeMenuArrary","state","menu","activeMenu","methods","leftScroll","container","document","getElementById","scrollLeft","rightScroll","openMenu","url","$router","push","path","$store","commit","closeMenu","index","length","i","$bus","$emit","unlock","$message","message","type","password","then","res","code","created","mounted","$nextTick","$on"],"sources":["src/views/layout/index.vue"],"sourcesContent":["<template>\n  <div class=\"common-layout\">\n    <el-container v-show=\"lock == 0\">\n      <el-asside></el-asside>\n      <el-container>\n        <el-header></el-header>\n        <div class=\"main-menu\">\n          <div class=\"scroll-left\" @click=\"leftScroll()\">\n            <i class=\"el-icon-arrow-left\"></i>\n          </div>\n          <div class=\"menu\" id=\"menu\">\n            <div class=\"menu-item\" v-for=\"(item,index) in activeMenuArrary\" :key=\"index\" @click=\"openMenu(item.url)\">\n              <span :class=\"item.url == activeMenu?'active':''\" class=\"menu-name\">{{item.name}}</span>\n              <i v-if=\"item.url != '/index'\" class=\"menu-icon el-icon-close\" @click.stop=\"closeMenu(item.url)\"></i>\n            </div>\n          </div>\n          <div class=\"scroll-right\" @click=\"rightScroll()\">\n            <i class=\"el-icon-arrow-right\"></i>\n          </div>\n        </div>\n        <el-main></el-main>\n      </el-container>\n    </el-container>\n    <el-container v-show=\"lock == 1\">\n    <div class=\"lock\" >\n        <img class=\"lock-back\" src=\"../../assets/image/lock-back.jpg\"/>\n        <div class=\"form\">\n          <div class=\"content\">\n            <el-input prefix-icon=\"el-icon-star-off\" type=\"password\" v-model=\"pass\" size=\"mini\" placeholder=\"请输入密码\"></el-input>\n            <div @click=\"unlock\"><i class=\"el-icon-d-arrow-right\"></i></div>\n          </div>\n        </div>\n    </div>\n    </el-container>\n  </div>\n</template>\n\n<script>\n  import { mapState } from 'vuex'\n  import { getLock,setLock } from '@/utils/lock'\n  import { verPassword } from '@/api/api'\n  import elAsside from \"../../components/layout/aside\"\n  import elMain from \"../../components/layout/main\"\n  import elHeader from \"../../components/layout/header\"\n\n  export default {\n    name: \"index\",\n    data() {\n      return{\n        lock: 0,\n        pass: \"\",\n      }\n    },\n    components:{\n      elAsside,\n      elMain,\n      elHeader\n    },\n    computed: {\n      ...mapState({\n          activeMenuArrary: state => state.menu.activeMenuArrary,\n          activeMenu: state => state.menu.activeMenu\n      })\n    },\n    methods: {\n      leftScroll() {\n        var container = document.getElementById('menu');\n        // 向左滚动100像素\n        container.scrollLeft -= 100;\n      },\n      rightScroll() {\n        var container = document.getElementById('menu');\n        // 向右滚动100像素\n        container.scrollLeft += 100;\n      },\n      openMenu(url) {\n        if (this.activeMenu != url) {\n          this.$router.push({\n            path: url,\n          })\n          this.$store.commit('menu/setActiveMenu', url)\n        }\n      },\n      closeMenu(url) {\n        var index = this.activeMenuArrary.length - 1\n        for(let i = 0;i < this.activeMenuArrary.length;i++) {\n          if(this.activeMenuArrary[i].url == url) {\n            index = i;\n            break;\n          }\n        }\n        if(this.activeMenu == url) {\n          this.$router.push({\n            path: this.activeMenuArrary[index-1].url,\n          })\n          this.$store.commit('menu/setActiveMenu', this.activeMenuArrary[index-1].url)\n        }\n        this.$store.commit('menu/reduceActiveMenu', index)\n        this.$bus.$emit(\"clearKeepAlive\", url);\n      },\n      unlock() {\n        if (!this.pass) {\n          this.$message({\n              message: '请输入密码验证',\n              type: 'warning'\n          });\n          return;\n        }\n        verPassword({password:this.pass}).then(res => {\n          if (res.code == 1000) {\n            this.$message({\n              message: '验证通过',\n              type: 'success'\n            });\n            this.pass = \"\"\n            this.$bus.$emit('lock', 0)\n          } else {\n            this.$message({\n              message: res.message,\n              type: 'error'\n            });\n          }\n        })\n      }\n    },\n    created() {\n     \n    },\n    mounted() {\n      // console.clear()\n      this.$nextTick(() => {\n        this.lock = getLock()\n        this.$bus.$on('lock', res=>{\n          setLock(res)\n          this.lock = res\n        })\n      })\n      \n    }\n }\n</script>\n\n<style   scoped>\n    .common-layout >>> .el-menu-item {\n        min-width: 0;\n    }\n    .main-menu {\n      width: 100%;\n      height: 25px;\n      border-top: 1px solid #ECECF1;\n      background-color: #ffffff;\n      display: flex;\n      flex-direction: row;\n    }\n    .menu {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      height: 100%;\n      width: calc(100% - 60px);\n      overflow: scroll;\n      flex-grow: 0;\n      flex-basis: auto\n    }\n    .scroll-left {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      justify-content: center;\n      width: 30px;\n      height: 100%;\n      cursor: pointer;\n    }\n    .menu::-webkit-scrollbar {\n      width: 0px;\n      height: 0px;\n    }\n    .scroll-right {\n      display: flex;\n      flex-direction: row;\n      align-items: center;\n      justify-content: center;\n      width: 30px;\n      height: 100%;\n      cursor: pointer;\n    }\n    .menu-item {\n      width: 100px;\n      height: 100%;\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      align-items: center;\n      border-left: 1px solid #E5E5E5;\n      border-right: 1px solid #E5E5E5;\n      border-bottom: 1px solid #E5E5E5;\n      cursor: pointer;\n      background-color: #F5F7FA;\n      flex-shrink: 0;\n    }\n    .menu-name {\n      margin-left:10px;\n      font-size: 12px;\n      cursor: pointer;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n      font-family: '黑体';\n    }\n    .active {\n      color: #66B1FF;\n    }\n    .menu-icon {\n      cursor: pointer;\n      font-size: 12px;\n    }\n    .lock {\n      width: 100%;\n      height: 100vh;\n    }\n    .lock-back {\n      width: 100%;\n      height: 100%;\n      z-index: -1;\n      position: fixed;\n      object-fit: cover;\n    }\n    .form {\n      z-index: 999;\n      width: 100%;\n      height: 100vh;\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .content {\n      display: flex;\n      align-items: center;\n      color: black;\n      font-size: 20px;\n      cursor: pointer;\n    }\n</style>"],"mappings":";AAsCA,SAAAA,QAAA;AACA,SAAAC,OAAA,EAAAC,OAAA;AACA,SAAAC,WAAA;AACA,OAAAC,QAAA;AACA,OAAAC,MAAA;AACA,OAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MACAC,IAAA;IACA;EACA;EACAC,UAAA;IACAP,QAAA;IACAC,MAAA;IACAC;EACA;EACAM,QAAA;IACA,GAAAZ,QAAA;MACAa,gBAAA,EAAAC,KAAA,IAAAA,KAAA,CAAAC,IAAA,CAAAF,gBAAA;MACAG,UAAA,EAAAF,KAAA,IAAAA,KAAA,CAAAC,IAAA,CAAAC;IACA;EACA;EACAC,OAAA;IACAC,WAAA;MACA,IAAAC,SAAA,GAAAC,QAAA,CAAAC,cAAA;MACA;MACAF,SAAA,CAAAG,UAAA;IACA;IACAC,YAAA;MACA,IAAAJ,SAAA,GAAAC,QAAA,CAAAC,cAAA;MACA;MACAF,SAAA,CAAAG,UAAA;IACA;IACAE,SAAAC,GAAA;MACA,SAAAT,UAAA,IAAAS,GAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UACAC,IAAA,EAAAH;QACA;QACA,KAAAI,MAAA,CAAAC,MAAA,uBAAAL,GAAA;MACA;IACA;IACAM,UAAAN,GAAA;MACA,IAAAO,KAAA,QAAAnB,gBAAA,CAAAoB,MAAA;MACA,SAAAC,CAAA,MAAAA,CAAA,QAAArB,gBAAA,CAAAoB,MAAA,EAAAC,CAAA;QACA,SAAArB,gBAAA,CAAAqB,CAAA,EAAAT,GAAA,IAAAA,GAAA;UACAO,KAAA,GAAAE,CAAA;UACA;QACA;MACA;MACA,SAAAlB,UAAA,IAAAS,GAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UACAC,IAAA,OAAAf,gBAAA,CAAAmB,KAAA,MAAAP;QACA;QACA,KAAAI,MAAA,CAAAC,MAAA,4BAAAjB,gBAAA,CAAAmB,KAAA,MAAAP,GAAA;MACA;MACA,KAAAI,MAAA,CAAAC,MAAA,0BAAAE,KAAA;MACA,KAAAG,IAAA,CAAAC,KAAA,mBAAAX,GAAA;IACA;IACAY,OAAA;MACA,UAAA3B,IAAA;QACA,KAAA4B,QAAA;UACAC,OAAA;UACAC,IAAA;QACA;QACA;MACA;MACArC,WAAA;QAAAsC,QAAA,OAAA/B;MAAA,GAAAgC,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAN,QAAA;YACAC,OAAA;YACAC,IAAA;UACA;UACA,KAAA9B,IAAA;UACA,KAAAyB,IAAA,CAAAC,KAAA;QACA;UACA,KAAAE,QAAA;YACAC,OAAA,EAAAI,GAAA,CAAAJ,OAAA;YACAC,IAAA;UACA;QACA;MACA;IACA;EACA;EACAK,QAAA,GAEA;EACAC,QAAA;IACA;IACA,KAAAC,SAAA;MACA,KAAAtC,IAAA,GAAAR,OAAA;MACA,KAAAkC,IAAA,CAAAa,GAAA,SAAAL,GAAA;QACAzC,OAAA,CAAAyC,GAAA;QACA,KAAAlC,IAAA,GAAAkC,GAAA;MACA;IACA;EAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}