{"ast":null,"code":"import axios from 'axios';\nimport store from '@/store';\nimport { Message, MessageBox } from 'element-ui'; //导入element-ui组件库\n\n// 创建axios的对象\nconst instance = axios.create({\n  baseURL: \"http://localhost:8080\",\n  //配置固定域名\n  timeout: 5000\n});\n\n// 请求拦截\n// 所有的网络请求都会走这个方法,可以在请求添加自定义内容\ninstance.interceptors.request.use(function (config) {\n  if (config.method === 'post') {\n    if (!(config.data instanceof FormData)) {\n      config.data = {\n        ...config.data,\n        _t: Date.parse(new Date()) / 1000 // 时间戳\n      };\n    }\n  } else if (config.method === 'get') {\n    config.params = {\n      random: Math.random(),\n      // 随机数\n      ...config.params\n    };\n  }\n  config.headers.x_access_token = window.localStorage.getItem(\"token\"); // 请求头添加token值\n  return config;\n}, function (err) {\n  return Promise.request(err);\n});\n\n// 响应拦截\n// 此处可以根据服务器返回的状态码做相应的数据\ninstance.interceptors.response.use(function (response) {\n  const res = response;\n  if (res.data.code === 1011 || res.data.code == 1008 || res.data.code == 1006) {\n    MessageBox.alert('系统登陆已过期，请重新登录', '错误', {\n      confirmButtonText: '确定',\n      type: 'error'\n    }).then(() => {\n      store.dispatch('user/logout').then(() => {\n        store.commit(\"menu/setMenus\", []);\n        store.commit(\"menu/setRoutes\", []);\n        store.commit(\"menu/setDisplayMenus\", []);\n        store.commit(\"menu/setBtnMenus\", []);\n        location.reload();\n      });\n    });\n    return Promise.reject('error');\n  } else if (res.data.code == 1009) {\n    MessageBox.alert('该账号已被锁定', '错误', {\n      confirmButtonText: '确定',\n      type: 'error'\n    }).then(() => {\n      store.dispatch('user/logout').then(() => {\n        store.commit(\"menu/setMenus\", []);\n        store.commit(\"menu/setRoutes\", []);\n        store.commit(\"menu/setDisplayMenus\", []);\n        store.commit(\"menu/setBtnMenus\", []);\n        location.reload();\n      });\n    });\n    return Promise.reject('error');\n  } else if (res.status != 200) {\n    MessageBox.alert('系统内部错误，请联系管理员维护', '错误', {\n      confirmButtonText: '确定',\n      type: 'error'\n    });\n    return Promise.reject('error');\n  } else {\n    return res.data;\n  }\n}, function (err) {\n  MessageBox.alert('系统内部错误，请联系管理员维护', '错误', {\n    confirmButtonText: '确定',\n    type: 'error'\n  });\n  return Promise.reject('error');\n});\n\n// 封装get和post请求\nexport function get(url, params) {\n  return instance.get(url, {\n    params\n  });\n}\nexport function post(url, data) {\n  return instance.post(url, data);\n}\nexport default instance;","map":{"version":3,"names":["axios","store","Message","MessageBox","instance","create","baseURL","timeout","interceptors","request","use","config","method","data","FormData","_t","Date","parse","params","random","Math","headers","x_access_token","window","localStorage","getItem","err","Promise","response","res","code","alert","confirmButtonText","type","then","dispatch","commit","location","reload","reject","status","get","url","post"],"sources":["C:/Users/32049/Desktop/edu-hub-admin-frontend/src/utils/request.js"],"sourcesContent":["import axios from 'axios'\r\nimport store from '@/store'\r\nimport { Message, MessageBox } from 'element-ui'  //导入element-ui组件库\r\n \r\n// 创建axios的对象\r\nconst instance = axios.create({\r\n    baseURL: \"http://localhost:8080\",  //配置固定域名\r\n    timeout: 5000\r\n})\r\n \r\n// 请求拦截\r\n// 所有的网络请求都会走这个方法,可以在请求添加自定义内容\r\ninstance.interceptors.request.use(\r\n    function (config) {\r\n        if (config.method === 'post') {\r\n            if (!(config.data instanceof FormData)) {\r\n            config.data = {\r\n              ...config.data,\r\n              _t: Date.parse(new Date()) / 1000 // 时间戳\r\n            }\r\n          }\r\n        } else if (config.method === 'get') {\r\n            config.params = {\r\n              random: Math.random(), // 随机数\r\n              ...config.params\r\n            }\r\n        }\r\n        config.headers.x_access_token = window.localStorage.getItem(\"token\") // 请求头添加token值\r\n        return config\r\n    },\r\n    function (err) {\r\n        return Promise.request(err)\r\n    }\r\n)\r\n \r\n// 响应拦截\r\n// 此处可以根据服务器返回的状态码做相应的数据\r\ninstance.interceptors.response.use(\r\n    function (response) {\r\n        const res = response\r\n        if (res.data.code === 1011 || res.data.code == 1008 || res.data.code == 1006) {\r\n            MessageBox.alert('系统登陆已过期，请重新登录', '错误', {\r\n                confirmButtonText: '确定',\r\n                type: 'error'\r\n            }).then(() => {\r\n                store.dispatch('user/logout').then(() => {\r\n                    store.commit(\"menu/setMenus\",[])\r\n                    store.commit(\"menu/setRoutes\",[])\r\n                    store.commit(\"menu/setDisplayMenus\",[])\r\n                    store.commit(\"menu/setBtnMenus\",[])\r\n                    location.reload()\r\n                })\r\n            })\r\n            return Promise.reject('error')\r\n        } else if(res.data.code == 1009) {\r\n            MessageBox.alert('该账号已被锁定', '错误', {\r\n                confirmButtonText: '确定',\r\n                type: 'error'\r\n            }).then(() => {\r\n                store.dispatch('user/logout').then(() => {\r\n                    store.commit(\"menu/setMenus\",[])\r\n                    store.commit(\"menu/setRoutes\",[])\r\n                    store.commit(\"menu/setDisplayMenus\",[])\r\n                    store.commit(\"menu/setBtnMenus\",[])\r\n                    location.reload()\r\n                })\r\n            })\r\n            return Promise.reject('error')\r\n        } else if (res.status != 200) {\r\n            MessageBox.alert('系统内部错误，请联系管理员维护', '错误', {\r\n                confirmButtonText: '确定',\r\n                type: 'error'\r\n            })\r\n            return Promise.reject('error')\r\n        } else {\r\n            return res.data\r\n        }\r\n    },\r\n    function (err) {\r\n        MessageBox.alert('系统内部错误，请联系管理员维护', '错误', {\r\n            confirmButtonText: '确定',\r\n            type: 'error'\r\n        })\r\n        return Promise.reject('error')\r\n    }\r\n)\r\n \r\n// 封装get和post请求\r\nexport function get(url, params) {\r\n    return instance.get(url, {params})\r\n}\r\n \r\nexport function post(url, data) {\r\n    return instance.post(url, data)\r\n}\r\n \r\nexport default instance;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}